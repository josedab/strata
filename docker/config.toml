# Strata Configuration File
# Default configuration for Docker deployment

[server]
# Node identifier (unique per node in cluster)
node_id = 1

# Bind addresses
bind_address = "0.0.0.0"
s3_port = 8080
metadata_port = 9090
data_port = 9091
metrics_port = 9100

# Worker threads (0 = auto-detect)
worker_threads = 0

[storage]
# Data directory for chunk storage
data_dir = "/var/lib/strata/data"

# Metadata directory (RocksDB)
metadata_dir = "/var/lib/strata/metadata"

# Maximum chunk size in bytes (default: 64MB)
max_chunk_size = 67108864

# Enable compression for stored chunks
compression = "lz4"

[raft]
# Raft cluster configuration
election_timeout_min_ms = 150
election_timeout_max_ms = 300
heartbeat_interval_ms = 50

# Snapshot configuration
snapshot_threshold = 10000
snapshot_dir = "/var/lib/strata/metadata/snapshots"

# Initial cluster peers (comma-separated)
# Example: "node1:9090,node2:9090,node3:9090"
initial_peers = ""

[erasure]
# Reed-Solomon configuration
# data_shards + parity_shards = total shards
data_shards = 4
parity_shards = 2

[s3]
# S3 gateway configuration
enabled = true
region = "us-east-1"
max_object_size = 5368709120  # 5GB

# Access credentials (override with environment variables in production)
# STRATA_S3_ACCESS_KEY and STRATA_S3_SECRET_KEY
access_key = "strata-access-key"
secret_key = "strata-secret-key"

[cache]
# LRU cache configuration
enabled = true
max_size_bytes = 1073741824  # 1GB
ttl_seconds = 3600

[logging]
# Log level: trace, debug, info, warn, error
level = "info"

# Log format: json, text
format = "json"

# Log directory
dir = "/var/lib/strata/logs"

[metrics]
# Prometheus metrics configuration
enabled = true
endpoint = "/metrics"

[health]
# Health check configuration
liveness_path = "/health/live"
readiness_path = "/health/ready"

[security]
# TLS configuration (disabled by default for development)
tls_enabled = false
# tls_cert_path = "/etc/strata/tls/cert.pem"
# tls_key_path = "/etc/strata/tls/key.pem"

# Authentication
auth_enabled = false
# jwt_secret = "your-jwt-secret-here"

[limits]
# Rate limiting
requests_per_second = 1000
burst_size = 100

# Connection limits
max_connections = 10000
connection_timeout_ms = 30000

# Request limits
max_request_body_bytes = 5368709120  # 5GB
